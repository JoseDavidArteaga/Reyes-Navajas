"use strict";(self.webpackChunkreyes_navajas_frontend=self.webpackChunkreyes_navajas_frontend||[]).push([[123],{9123:($,u,a)=>{a.r(u),a.d(u,{RegisterComponent:()=>D});var m=a(177),i=a(4341),d=a(3326),c=a(9757),e=a(4438),g=a(3897),f=a(5794);function p(t,s){1&t&&e.EFF(0," El nombre es requerido ")}function _(t,s){1&t&&e.EFF(0," El nombre debe tener al menos 2 caracteres ")}function F(t,s){if(1&t&&(e.j41(0,"div",13),e.DNE(1,p,1,0)(2,_,1,0),e.k0s()),2&t){let r,o;const n=e.XpG();e.R7$(),e.vxM(1,null!=(r=n.registerForm.get("nombre"))&&null!=r.errors&&r.errors.required?1:-1),e.R7$(),e.vxM(2,null!=(o=n.registerForm.get("nombre"))&&null!=o.errors&&o.errors.minlength?2:-1)}}function h(t,s){1&t&&e.EFF(0," El n\xfamero de celular es requerido ")}function v(t,s){1&t&&e.EFF(0," Ingresa un n\xfamero v\xe1lido (10 d\xedgitos, iniciando con 3) ")}function E(t,s){if(1&t&&(e.j41(0,"div",13),e.DNE(1,h,1,0)(2,v,1,0),e.k0s()),2&t){let r,o;const n=e.XpG();e.R7$(),e.vxM(1,null!=(r=n.registerForm.get("telefono"))&&null!=r.errors&&r.errors.required?1:-1),e.R7$(),e.vxM(2,null!=(o=n.registerForm.get("telefono"))&&null!=o.errors&&o.errors.pattern?2:-1)}}function b(t,s){1&t&&e.EFF(0," La contrase\xf1a es requerida ")}function C(t,s){1&t&&e.EFF(0," La contrase\xf1a debe tener al menos 6 caracteres ")}function x(t,s){1&t&&e.EFF(0," La contrase\xf1a debe contener al menos una letra y un n\xfamero ")}function R(t,s){if(1&t&&(e.j41(0,"div",13),e.DNE(1,b,1,0)(2,C,1,0)(3,x,1,0),e.k0s()),2&t){let r,o,n;const l=e.XpG();e.R7$(),e.vxM(1,null!=(r=l.registerForm.get("password"))&&null!=r.errors&&r.errors.required?1:-1),e.R7$(),e.vxM(2,null!=(o=l.registerForm.get("password"))&&null!=o.errors&&o.errors.minlength?2:-1),e.R7$(),e.vxM(3,null!=(n=l.registerForm.get("password"))&&null!=n.errors&&n.errors.pattern?3:-1)}}function w(t,s){if(1&t&&(e.j41(0,"div",19)(1,"div",28),e.EFF(2,"Fortaleza de la contrase\xf1a:"),e.k0s(),e.j41(3,"div",29),e.nrm(4,"div",30),e.k0s(),e.j41(5,"div",31),e.EFF(6),e.k0s()()),2&t){const r=e.XpG();e.R7$(4),e.HbH(r.getPasswordStrengthClass()),e.xc7("width",r.getPasswordStrengthWidth()+"%"),e.R7$(),e.HbH(r.getPasswordStrengthTextClass()),e.R7$(),e.SpI(" ",r.getPasswordStrengthText()," ")}}function T(t,s){1&t&&e.EFF(0," Confirma tu contrase\xf1a ")}function k(t,s){1&t&&e.EFF(0," Las contrase\xf1as no coinciden ")}function y(t,s){if(1&t&&(e.j41(0,"div",13),e.DNE(1,T,1,0)(2,k,1,0),e.k0s()),2&t){let r,o;const n=e.XpG();e.R7$(),e.vxM(1,null!=(r=n.registerForm.get("confirmPassword"))&&null!=r.errors&&r.errors.required?1:-1),e.R7$(),e.vxM(2,null!=(o=n.registerForm.get("confirmPassword"))&&null!=o.errors&&o.errors.passwordMismatch?2:-1)}}function M(t,s){1&t&&(e.j41(0,"div",13),e.EFF(1," Debes aceptar los t\xe9rminos y condiciones "),e.k0s())}function P(t,s){1&t&&(e.nrm(0,"app-loading-spinner",32),e.j41(1,"span",33),e.EFF(2,"Creando cuenta..."),e.k0s())}function j(t,s){1&t&&e.EFF(0," Crear Cuenta ")}let D=(()=>{class t{constructor(r,o,n,l){this.fb=r,this.router=o,this.authService=n,this.toastr=l,this.registerForm=this.fb.group({nombre:["",[i.k0.required,i.k0.minLength(2)]],telefono:["",[i.k0.required,i.k0.pattern(/^3\d{9}$/)]],password:["",[i.k0.required,i.k0.minLength(6),i.k0.pattern(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d@$!%*?&]{6,}$/)]],confirmPassword:["",[i.k0.required]],acceptTerms:[!1,[i.k0.requiredTrue]]},{validators:this.passwordMatchValidator})}onSubmit(){this.registerForm.valid?this.authService.register({nombre:this.registerForm.value.nombre,telefono:this.registerForm.value.telefono,password:this.registerForm.value.password}).subscribe({next:o=>{o.success&&(this.toastr.success("\xa1Cuenta creada exitosamente!","Registro completado"),this.toastr.info("Ahora puedes iniciar sesi\xf3n","Siguiente paso"),this.router.navigate(["/login"]))},error:o=>{console.error("Error en registro:",o),this.toastr.error(409===o.status?"Este n\xfamero de celular ya est\xe1 registrado":"Error al crear la cuenta. Intenta nuevamente.","Error de registro")}}):this.markFormGroupTouched()}isFieldInvalid(r){const o=this.registerForm.get(r);return!(!o||!o.invalid||!o.dirty&&!o.touched)}getPasswordStrengthWidth(){const r=this.registerForm.get("password")?.value||"";if(0===r.length)return 0;let o=0;return r.length>=6&&(o+=25),r.length>=8&&(o+=25),/[a-zA-Z]/.test(r)&&/[0-9]/.test(r)&&(o+=25),/[^A-Za-z0-9]/.test(r)&&(o+=25),o}getPasswordStrengthClass(){const r=this.getPasswordStrengthWidth();return r<=25?"bg-red-500":r<=50?"bg-yellow-500":r<=75?"bg-blue-500":"bg-green-500"}getPasswordStrengthText(){const r=this.getPasswordStrengthWidth();return r<=25?"D\xe9bil":r<=50?"Regular":r<=75?"Buena":"Excelente"}getPasswordStrengthTextClass(){const r=this.getPasswordStrengthWidth();return r<=25?"text-red-400":r<=50?"text-yellow-400":r<=75?"text-blue-400":"text-green-400"}passwordMatchValidator(r){const o=r.get("password"),n=r.get("confirmPassword");return o&&n&&o.value!==n.value?(n.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):null}markFormGroupTouched(){Object.keys(this.registerForm.controls).forEach(r=>{this.registerForm.get(r)?.markAsTouched()})}static{this.\u0275fac=function(o){return new(o||t)(e.rXU(i.ok),e.rXU(d.Ix),e.rXU(g.uR),e.rXU(f.tw))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-register"]],standalone:!0,features:[e.aNF],decls:56,vars:17,consts:[[1,"min-h-screen","flex","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8","bg-barberia-pattern"],[1,"max-w-md","w-full","space-y-8"],[1,"text-center"],[1,"flex","justify-center"],[1,"w-16","h-16","bg-barberia-gold","rounded-full","flex","items-center","justify-center"],[1,"text-barberia-dark","font-bold","text-2xl"],[1,"mt-6","text-3xl","font-display","font-bold","text-gray-100"],[1,"mt-2","text-sm","text-gray-400"],[1,"card"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre",1,"form-label"],["id","nombre","name","nombre","type","text","formControlName","nombre","placeholder","Tu nombre completo",1,"form-input"],[1,"form-error"],["for","telefono",1,"form-label"],["id","telefono","name","telefono","type","tel","formControlName","telefono","placeholder","Ej: 3001234567",1,"form-input"],[1,"text-xs","text-gray-500","mt-1"],["for","password",1,"form-label"],["id","password","name","password","type","password","formControlName","password","placeholder","M\xednimo 6 caracteres",1,"form-input"],[1,"mt-2"],["for","confirmPassword",1,"form-label"],["id","confirmPassword","name","confirmPassword","type","password","formControlName","confirmPassword","placeholder","Repite tu contrase\xf1a",1,"form-input"],[1,"flex","items-start"],["type","checkbox","formControlName","acceptTerms",1,"mt-1","mr-3","rounded","border-gray-600","bg-gray-800","text-barberia-gold","focus:ring-barberia-gold","focus:ring-offset-0"],[1,"text-sm","text-gray-400"],["href","#",1,"text-barberia-gold","hover:text-barberia-goldLight"],["type","submit",1,"w-full","btn-primary","flex","justify-center","items-center","py-3",3,"disabled"],["routerLink","/login",1,"text-barberia-gold","hover:text-barberia-goldLight","font-medium"],[1,"text-xs","text-gray-500"],[1,"w-full","bg-gray-700","rounded-full","h-1","mt-1"],[1,"h-1","rounded-full","transition-all","duration-300"],[1,"text-xs","mt-1"],["size","small"],[1,"ml-2"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),e.EFF(6,"R"),e.k0s()()(),e.j41(7,"h2",6),e.EFF(8," Crear Cuenta "),e.k0s(),e.j41(9,"p",7),e.EFF(10," \xdanete a la familia Reyes & Navajas "),e.k0s()(),e.j41(11,"div",8)(12,"form",9),e.bIt("ngSubmit",function(){return n.onSubmit()}),e.j41(13,"div",10)(14,"label",11),e.EFF(15," Nombre Completo "),e.k0s(),e.nrm(16,"input",12),e.DNE(17,F,3,2,"div",13),e.k0s(),e.j41(18,"div",10)(19,"label",14),e.EFF(20," N\xfamero de Celular "),e.k0s(),e.nrm(21,"input",15),e.DNE(22,E,3,2,"div",13),e.j41(23,"div",16),e.EFF(24," Tu n\xfamero ser\xe1 \xfanico en el sistema "),e.k0s()(),e.j41(25,"div",10)(26,"label",17),e.EFF(27," Contrase\xf1a "),e.k0s(),e.nrm(28,"input",18),e.DNE(29,R,4,3,"div",13)(30,w,7,7,"div",19),e.k0s(),e.j41(31,"div",10)(32,"label",20),e.EFF(33," Confirmar Contrase\xf1a "),e.k0s(),e.nrm(34,"input",21),e.DNE(35,y,3,2,"div",13),e.k0s(),e.j41(36,"div",10)(37,"label",22),e.nrm(38,"input",23),e.j41(39,"span",24),e.EFF(40," Acepto los "),e.j41(41,"a",25),e.EFF(42," t\xe9rminos y condiciones "),e.k0s(),e.EFF(43," y la "),e.j41(44,"a",25),e.EFF(45," pol\xedtica de privacidad "),e.k0s()()(),e.DNE(46,M,2,0,"div",13),e.k0s(),e.j41(47,"div")(48,"button",26),e.DNE(49,P,3,0)(50,j,1,0),e.k0s()(),e.j41(51,"div",2)(52,"p",24),e.EFF(53," \xbfYa tienes cuenta? "),e.j41(54,"a",27),e.EFF(55," Inicia sesi\xf3n aqu\xed "),e.k0s()()()()()()()),2&o){let l;e.R7$(12),e.Y8G("formGroup",n.registerForm),e.R7$(4),e.AVh("border-red-500",n.isFieldInvalid("nombre")),e.R7$(),e.vxM(17,n.isFieldInvalid("nombre")?17:-1),e.R7$(4),e.AVh("border-red-500",n.isFieldInvalid("telefono")),e.R7$(),e.vxM(22,n.isFieldInvalid("telefono")?22:-1),e.R7$(6),e.AVh("border-red-500",n.isFieldInvalid("password")),e.R7$(),e.vxM(29,n.isFieldInvalid("password")?29:-1),e.R7$(),e.vxM(30,null!=(l=n.registerForm.get("password"))&&l.value?30:-1),e.R7$(4),e.AVh("border-red-500",n.isFieldInvalid("confirmPassword")),e.R7$(),e.vxM(35,n.isFieldInvalid("confirmPassword")?35:-1),e.R7$(11),e.vxM(46,n.isFieldInvalid("acceptTerms")?46:-1),e.R7$(2),e.Y8G("disabled",n.registerForm.invalid||n.authService.isLoading()),e.R7$(),e.vxM(49,n.authService.isLoading()?49:50)}},dependencies:[m.MD,i.X1,i.qT,i.me,i.Zm,i.BC,i.cb,i.j4,i.JD,d.iI,d.Wk,c.NB],encapsulation:2,changeDetection:0})}}return t})()}}]);
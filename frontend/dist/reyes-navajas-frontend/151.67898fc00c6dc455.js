"use strict";(self.webpackChunkreyes_navajas_frontend=self.webpackChunkreyes_navajas_frontend||[]).push([[151],{7151:(L,u,a)=>{a.r(u),a.d(u,{LoginComponent:()=>I});var m=a(177),s=a(4341),d=a(3326),c=a(9757),e=a(4438),g=a(3897),f=a(5794);function _(n,l){1&n&&(e.j41(0,"span"),e.EFF(1," El n\xfamero de celular es requerido "),e.k0s())}function F(n,l){1&n&&(e.j41(0,"span"),e.EFF(1," Ingresa un n\xfamero v\xe1lido (10 d\xedgitos) "),e.k0s())}function E(n,l){if(1&n&&e.DNE(0,F,2,0,"span",30),2&n){let t;const r=e.XpG(2);e.Y8G("ngIf",null==(t=r.loginForm.get("telefono"))||null==t.errors?null:t.errors.pattern)}}function v(n,l){if(1&n&&(e.j41(0,"div",29),e.DNE(1,_,2,0,"span",20)(2,E,1,1,"ng-template",null,1,e.C5r),e.k0s()),2&n){let t;const r=e.sdS(3),o=e.XpG();e.R7$(),e.Y8G("ngIf",null==(t=o.loginForm.get("telefono"))||null==t.errors?null:t.errors.required)("ngIfElse",r)}}function h(n,l){1&n&&(e.j41(0,"span"),e.EFF(1," La contrase\xf1a es requerida "),e.k0s())}function b(n,l){1&n&&(e.j41(0,"span"),e.EFF(1," La contrase\xf1a debe tener al menos 6 caracteres "),e.k0s())}function x(n,l){if(1&n&&e.DNE(0,b,2,0,"span",30),2&n){let t;const r=e.XpG(2);e.Y8G("ngIf",null==(t=r.loginForm.get("password"))||null==t.errors?null:t.errors.minlength)}}function j(n,l){if(1&n&&(e.j41(0,"div",29),e.DNE(1,h,2,0,"span",20)(2,x,1,1,"ng-template",null,2,e.C5r),e.k0s()),2&n){let t;const r=e.sdS(3),o=e.XpG();e.R7$(),e.Y8G("ngIf",null==(t=o.loginForm.get("password"))||null==t.errors?null:t.errors.required)("ngIfElse",r)}}function k(n,l){1&n&&(e.j41(0,"div"),e.nrm(1,"app-loading-spinner",31),e.j41(2,"span",32),e.EFF(3,"Iniciando sesi\xf3n..."),e.k0s()())}function C(n,l){1&n&&e.EFF(0," Iniciar Sesi\xf3n ")}let I=(()=>{class n{constructor(t,r,o,i,p){this.fb=t,this.router=r,this.route=o,this.authService=i,this.toastr=p,this.returnUrl="/",this.loginForm=this.fb.group({telefono:["",[s.k0.required,s.k0.pattern(/^3\d{9}$/)]],password:["",[s.k0.required,s.k0.minLength(6)]]}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}onSubmit(){this.loginForm.valid?this.authService.login(this.loginForm.value).subscribe({next:r=>{if(r.success){this.toastr.success("\xa1Bienvenido!","Login exitoso");let i=this.returnUrl;if("/"===this.returnUrl)switch(r.data.usuario.rol){case"ADMIN":i="/admin/gestion-barberos";break;case"BARBERO":i="/barbero/agenda-diaria";break;case"CLIENTE":i="/cliente/reservar";break;default:i="/"}this.router.navigate([i])}},error:r=>{console.error("Error en login:",r),this.toastr.error("Credenciales incorrectas","Error de autenticaci\xf3n")}}):this.markFormGroupTouched()}isFieldInvalid(t){const r=this.loginForm.get(t);return!(!r||!r.invalid||!r.dirty&&!r.touched)}markFormGroupTouched(){Object.keys(this.loginForm.controls).forEach(t=>{this.loginForm.get(t)?.markAsTouched()})}static{this.\u0275fac=function(r){return new(r||n)(e.rXU(s.ok),e.rXU(d.Ix),e.rXU(d.nX),e.rXU(g.uR),e.rXU(f.tw))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-login"]],standalone:!0,features:[e.aNF],decls:57,vars:10,consts:[["loginText",""],["telefonoPatternError",""],["passwordMinLengthError",""],[1,"min-h-screen","flex","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8","bg-barberia-pattern"],[1,"max-w-md","w-full","space-y-8"],[1,"text-center"],[1,"flex","justify-center"],[1,"w-16","h-16","bg-barberia-gold","rounded-full","flex","items-center","justify-center"],[1,"text-barberia-dark","font-bold","text-2xl"],[1,"mt-6","text-3xl","font-display","font-bold","text-gray-100"],[1,"mt-2","text-sm","text-gray-400"],[1,"card"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"form-group"],["for","telefono",1,"form-label"],["id","telefono","name","telefono","type","tel","formControlName","telefono","placeholder","Ej: 3001234567",1,"form-input"],["class","form-error",4,"ngIf"],["for","password",1,"form-label"],["id","password","name","password","type","password","formControlName","password","placeholder","Tu contrase\xf1a",1,"form-input"],["type","submit",1,"w-full","btn-primary","flex","justify-center","items-center","py-3",3,"disabled"],[4,"ngIf","ngIfElse"],[1,"text-sm","text-gray-400"],["routerLink","/registro",1,"text-barberia-gold","hover:text-barberia-goldLight","font-medium"],[1,"mt-6","pt-6","border-t","border-gray-700"],[1,"text-xs","text-gray-500","mb-3"],[1,"space-y-2","text-xs","text-gray-400"],[1,"flex","justify-between"],[1,"bg-gray-700","px-2","py-1","rounded"],[1,"text-center","mt-2"],[1,"form-error"],[4,"ngIf"],["size","small"],[1,"ml-2"]],template:function(r,o){if(1&r){const i=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"span",8),e.EFF(6,"R"),e.k0s()()(),e.j41(7,"h2",9),e.EFF(8," Iniciar Sesi\xf3n "),e.k0s(),e.j41(9,"p",10),e.EFF(10," Ingresa a tu cuenta en Reyes & Navajas "),e.k0s()(),e.j41(11,"div",11)(12,"form",12),e.bIt("ngSubmit",function(){return e.eBV(i),e.Njj(o.onSubmit())}),e.j41(13,"div",13)(14,"label",14),e.EFF(15," N\xfamero de Celular "),e.k0s(),e.nrm(16,"input",15),e.DNE(17,v,4,2,"div",16),e.k0s(),e.j41(18,"div",13)(19,"label",17),e.EFF(20," Contrase\xf1a "),e.k0s(),e.nrm(21,"input",18),e.DNE(22,j,4,2,"div",16),e.k0s(),e.j41(23,"div")(24,"button",19),e.DNE(25,k,4,0,"div",20)(26,C,1,0,"ng-template",null,0,e.C5r),e.k0s()(),e.j41(28,"div",5)(29,"p",21),e.EFF(30," \xbfNo tienes cuenta? "),e.j41(31,"a",22),e.EFF(32," Reg\xedstrate aqu\xed "),e.k0s()()()(),e.j41(33,"div",23)(34,"p",24),e.EFF(35,"Cuentas de prueba:"),e.k0s(),e.j41(36,"div",25)(37,"div",26)(38,"span"),e.EFF(39,"Admin:"),e.k0s(),e.j41(40,"code",27),e.EFF(41,"3001234567"),e.k0s()(),e.j41(42,"div",26)(43,"span"),e.EFF(44,"Barbero:"),e.k0s(),e.j41(45,"code",27),e.EFF(46,"3002345678"),e.k0s()(),e.j41(47,"div",26)(48,"span"),e.EFF(49,"Cliente:"),e.k0s(),e.j41(50,"code",27),e.EFF(51,"3004567890"),e.k0s()(),e.j41(52,"div",28)(53,"span"),e.EFF(54,"Contrase\xf1a para todos: "),e.k0s(),e.j41(55,"code",27),e.EFF(56,"123456"),e.k0s()()()()()()()}if(2&r){const i=e.sdS(27);e.R7$(12),e.Y8G("formGroup",o.loginForm),e.R7$(4),e.AVh("border-red-500",o.isFieldInvalid("telefono")),e.R7$(),e.Y8G("ngIf",o.isFieldInvalid("telefono")),e.R7$(4),e.AVh("border-red-500",o.isFieldInvalid("password")),e.R7$(),e.Y8G("ngIf",o.isFieldInvalid("password")),e.R7$(2),e.Y8G("disabled",o.loginForm.invalid||o.authService.isLoading()),e.R7$(),e.Y8G("ngIf",o.authService.isLoading())("ngIfElse",i)}},dependencies:[m.MD,m.bT,s.X1,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,d.iI,d.Wk,c.NB],encapsulation:2,changeDetection:0})}}return n})()}}]);
"use strict";(self.webpackChunkreyes_navajas_frontend=self.webpackChunkreyes_navajas_frontend||[]).push([[193],{9193:(C,b,l)=>{l.r(b),l.d(b,{GestionBarberosComponent:()=>x});var e=l(4438),d=l(177),i=l(4341),p=l(5859),_=l(9757),m=l(3897);function f(r,n){1&r&&(e.j41(0,"div"),e.nrm(1,"app-loading-spinner",16),e.k0s())}function g(r,n){if(1&r&&(e.j41(0,"div",37),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.telefono)}}function u(r,n){if(1&r&&(e.j41(0,"span",38),e.EFF(1),e.k0s()),2&r){const t=n.$implicit;e.R7$(),e.SpI(" ",t," ")}}function F(r,n){if(1&r&&(e.j41(0,"div",26)(1,"span",39),e.EFF(2,"\u2605"),e.k0s(),e.j41(3,"span"),e.EFF(4),e.k0s()()),2&r){const t=e.XpG().$implicit;e.R7$(4),e.JRh(t.calificacionPromedio)}}function E(r,n){1&r&&(e.j41(0,"span",40),e.EFF(1,"N/A"),e.k0s())}function h(r,n){if(1&r){const t=e.RV6();e.j41(0,"tr")(1,"td",25)(2,"div",26)(3,"div",27)(4,"span",28),e.EFF(5),e.k0s()(),e.j41(6,"div")(7,"div",29),e.EFF(8),e.k0s(),e.DNE(9,g,2,1,"div",30),e.k0s()()(),e.j41(10,"td",25)(11,"div",31),e.DNE(12,u,2,1,"span",32),e.k0s()(),e.j41(13,"td",25)(14,"span"),e.EFF(15),e.k0s()(),e.j41(16,"td",25),e.DNE(17,F,5,1,"div",33)(18,E,2,0,"ng-template",null,1,e.C5r),e.k0s(),e.j41(20,"td",25),e.EFF(21),e.k0s(),e.j41(22,"td",25)(23,"div",34)(24,"button",35),e.bIt("click",function(){const a=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.editBarbero(a))}),e.EFF(25," Editar "),e.k0s(),e.j41(26,"button",36),e.bIt("click",function(){const a=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.toggleEstado(a))}),e.EFF(27),e.k0s()()()()}if(2&r){const t=n.$implicit,o=e.sdS(19),a=e.XpG(2);e.R7$(5),e.SpI(" ",t.nombre.charAt(0)," "),e.R7$(3),e.JRh(t.nombre),e.R7$(),e.Y8G("ngIf",t.telefono),e.R7$(3),e.Y8G("ngForOf",t.especialidades)("ngForTrackBy",a.trackByEspecialidad),e.R7$(2),e.HbH(a.getEstadoBadgeClass(t.estado)),e.R7$(),e.SpI(" ",t.estado," "),e.R7$(2),e.Y8G("ngIf",t.calificacionPromedio)("ngIfElse",o),e.R7$(4),e.SpI(" ",t.totalServicios||0," "),e.R7$(5),e.HbH("ACTIVO"===t.estado?"text-red-400 hover:text-red-300":"text-green-400 hover:text-green-300"),e.R7$(),e.SpI(" ","ACTIVO"===t.estado?"Desactivar":"Activar"," ")}}function B(r,n){1&r&&(e.j41(0,"tr")(1,"td",41)(2,"div",5),e.EFF(3," No hay barberos registrados "),e.k0s()()())}function v(r,n){if(1&r&&(e.j41(0,"div",17)(1,"div",18)(2,"table",19)(3,"thead",20)(4,"tr")(5,"th",21),e.EFF(6,"Barbero"),e.k0s(),e.j41(7,"th",21),e.EFF(8,"Especialidades"),e.k0s(),e.j41(9,"th",21),e.EFF(10,"Estado"),e.k0s(),e.j41(11,"th",21),e.EFF(12,"Calificaci\xf3n"),e.k0s(),e.j41(13,"th",21),e.EFF(14,"Servicios"),e.k0s(),e.j41(15,"th",21),e.EFF(16,"Acciones"),e.k0s()()(),e.j41(17,"tbody",22),e.DNE(18,h,28,14,"tr",23)(19,B,4,0,"tr",24),e.k0s()()()()),2&r){const t=e.XpG();e.R7$(18),e.Y8G("ngForOf",t.barberoService.barberos())("ngForTrackBy",t.trackByBarberoId),e.R7$(),e.Y8G("ngIf",0===t.barberoService.barberos().length)}}function k(r,n){if(1&r){const t=e.RV6();e.j41(0,"label",26)(1,"input",42),e.bIt("change",function(a){const s=e.eBV(t).$implicit,c=e.XpG();return e.Njj(c.onEspecialidadChange(a,s))}),e.k0s(),e.j41(2,"span",43),e.EFF(3),e.k0s()()}if(2&r){const t=n.$implicit;e.R7$(),e.Y8G("value",t),e.R7$(2),e.JRh(t)}}let x=(()=>{class r{constructor(t,o){this.fb=t,this.barberoService=o,this.showModal=(0,e.vPA)(!1),this.isEditing=(0,e.vPA)(!1),this.currentBarbero=null,this.especialidadesDisponibles=["Corte Cl\xe1sico","Corte Moderno","Barba","Afeitado","Degradados","Dise\xf1o"],this.barberoForm=this.fb.group({nombre:["",i.k0.required],telefono:[""],especialidades:[[],i.k0.required]})}ngOnInit(){}openCreateModal(){this.isEditing.set(!1),this.currentBarbero=null,this.barberoForm.reset(),this.showModal.set(!0)}editBarbero(t){this.isEditing.set(!0),this.currentBarbero=t,this.barberoForm.patchValue({nombre:t.nombre,telefono:t.telefono,especialidades:t.especialidades}),this.showModal.set(!0)}closeModal(){this.showModal.set(!1),this.currentBarbero=null,this.barberoForm.reset()}saveBarbero(){if(this.barberoForm.valid){const t=this.barberoForm.value;this.isEditing()?this.barberoService.updateBarbero(this.currentBarbero.id,t).subscribe(()=>{this.closeModal()}):this.barberoService.createBarbero(t).subscribe(()=>{this.closeModal()})}}toggleEstado(t){this.barberoService.cambiarEstadoBarbero(t.id,"ACTIVO"===t.estado?p.I.INACTIVO:p.I.ACTIVO).subscribe()}onEspecialidadChange(t,o){const a=this.barberoForm.get("especialidades")?.value||[];if(t.target.checked)a.push(o);else{const s=a.indexOf(o);s>-1&&a.splice(s,1)}this.barberoForm.patchValue({especialidades:a})}getEstadoBadgeClass(t){const o="badge ";switch(t){case"ACTIVO":return o+"badge-success";case"OCUPADO":return o+"badge-warning";case"DESCANSO":return o+"badge-info";default:return o+"badge-danger"}}trackByBarberoId(t,o){return o.id}trackByEspecialidad(t,o){return o}static{this.\u0275fac=function(o){return new(o||r)(e.rXU(i.ok),e.rXU(m.F$))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-gestion-barberos"]],standalone:!0,features:[e.aNF],decls:27,vars:7,consts:[["contentTemplate",""],["noRating",""],[1,"max-w-6xl","mx-auto","p-6"],[1,"mb-8","flex","justify-between","items-center"],[1,"text-3xl","font-display","font-bold","text-gray-100","mb-2"],[1,"text-gray-400"],[1,"btn-primary",3,"click"],[4,"ngIf","ngIfElse"],[3,"close","confirm","isOpen","title"],[1,"space-y-4",3,"formGroup"],[1,"form-group"],[1,"form-label"],["type","text","formControlName","nombre","placeholder","Nombre del barbero",1,"form-input"],["type","tel","formControlName","telefono","placeholder","N\xfamero de tel\xe9fono",1,"form-input"],[1,"space-y-2"],["class","flex items-center",4,"ngFor","ngForOf","ngForTrackBy"],["message","Cargando barberos..."],[1,"card"],[1,"overflow-x-auto"],[1,"table"],[1,"table-header"],[1,"table-header-cell"],[1,"table-body"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"table-cell"],[1,"flex","items-center"],[1,"w-10","h-10","bg-barberia-gold","bg-opacity-20","rounded-full","flex","items-center","justify-center","mr-3"],[1,"text-barberia-gold","font-semibold"],[1,"font-medium","text-gray-100"],["class","text-sm text-gray-400",4,"ngIf"],[1,"flex","flex-wrap","gap-1"],["class","px-2 py-1 bg-barberia-gold bg-opacity-20 text-barberia-gold text-xs rounded",4,"ngFor","ngForOf","ngForTrackBy"],["class","flex items-center",4,"ngIf","ngIfElse"],[1,"flex","space-x-2"],[1,"text-blue-400","hover:text-blue-300","text-sm",3,"click"],[1,"text-sm",3,"click"],[1,"text-sm","text-gray-400"],[1,"px-2","py-1","bg-barberia-gold","bg-opacity-20","text-barberia-gold","text-xs","rounded"],[1,"text-yellow-400","mr-1"],[1,"text-gray-500"],["colspan","6",1,"table-cell","text-center","py-8"],["type","checkbox",1,"mr-2","rounded","text-barberia-gold",3,"change","value"],[1,"text-gray-300"]],template:function(o,a){if(1&o){const s=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div")(3,"h1",4),e.EFF(4," Gesti\xf3n de Barberos "),e.k0s(),e.j41(5,"p",5),e.EFF(6," Administra el equipo de barberos de Reyes & Navajas "),e.k0s()(),e.j41(7,"button",6),e.bIt("click",function(){return e.eBV(s),e.Njj(a.openCreateModal())}),e.EFF(8," Nuevo Barbero "),e.k0s()(),e.DNE(9,f,2,0,"div",7)(10,v,20,3,"ng-template",null,0,e.C5r),e.j41(12,"app-modal",8),e.bIt("close",function(){return e.eBV(s),e.Njj(a.closeModal())})("confirm",function(){return e.eBV(s),e.Njj(a.saveBarbero())}),e.j41(13,"form",9)(14,"div",10)(15,"label",11),e.EFF(16,"Nombre"),e.k0s(),e.nrm(17,"input",12),e.k0s(),e.j41(18,"div",10)(19,"label",11),e.EFF(20,"Tel\xe9fono"),e.k0s(),e.nrm(21,"input",13),e.k0s(),e.j41(22,"div",10)(23,"label",11),e.EFF(24,"Especialidades"),e.k0s(),e.j41(25,"div",14),e.DNE(26,k,4,2,"label",15),e.k0s()()()()()}if(2&o){const s=e.sdS(11);e.R7$(9),e.Y8G("ngIf",a.barberoService.isLoading())("ngIfElse",s),e.R7$(3),e.Y8G("isOpen",a.showModal())("title",a.isEditing()?"Editar Barbero":"Nuevo Barbero"),e.R7$(),e.Y8G("formGroup",a.barberoForm),e.R7$(13),e.Y8G("ngForOf",a.especialidadesDisponibles)("ngForTrackBy",a.trackByEspecialidad)}},dependencies:[d.MD,d.Sq,d.bT,i.X1,i.qT,i.me,i.BC,i.cb,i.j4,i.JD,_.NB,_.zf],encapsulation:2,changeDetection:0})}}return r})()}}]);
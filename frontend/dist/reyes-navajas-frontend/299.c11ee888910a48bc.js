"use strict";(self.webpackChunkreyes_navajas_frontend=self.webpackChunkreyes_navajas_frontend||[]).push([[299],{1299:(g,c,r)=>{r.r(c),r.d(c,{MisReservasComponent:()=>h});var l=r(177),u=r(9757),e=r(4438),d=r(3897);const v=(a,i)=>i.id;function m(a,i){1&a&&e.nrm(0,"app-loading-spinner",4)}function p(a,i){if(1&a&&(e.j41(0,"div",9)(1,"div",11)(2,"div")(3,"h3",12),e.EFF(4),e.k0s(),e.j41(5,"p",3),e.EFF(6),e.k0s(),e.j41(7,"p",3),e.EFF(8),e.k0s()(),e.j41(9,"div",13)(10,"span",14),e.EFF(11),e.k0s(),e.j41(12,"p",15),e.EFF(13),e.nI1(14,"number"),e.k0s()()()()),2&a){const s=i.$implicit,t=e.XpG(2);e.R7$(4),e.JRh(null==s.servicio?null:s.servicio.nombre),e.R7$(2),e.SpI("Barbero: ",null==s.barbero?null:s.barbero.nombre,""),e.R7$(2),e.JRh(t.formatDate(s.fechaHora)),e.R7$(3),e.JRh(s.estado),e.R7$(2),e.SpI("$",e.bMT(14,5,null==s.servicio?null:s.servicio.precio),"")}}function f(a,i){1&a&&(e.j41(0,"p",10),e.EFF(1,"No tienes citas pr\xf3ximas"),e.k0s())}function F(a,i){if(1&a&&(e.j41(0,"div",9)(1,"div",11)(2,"div")(3,"h3",12),e.EFF(4),e.k0s(),e.j41(5,"p",3),e.EFF(6),e.k0s(),e.j41(7,"p",3),e.EFF(8),e.k0s()(),e.j41(9,"div",13)(10,"span"),e.EFF(11),e.k0s(),e.j41(12,"p",15),e.EFF(13),e.nI1(14,"number"),e.k0s()()()()),2&a){const s=i.$implicit,t=e.XpG(2);e.R7$(4),e.JRh(null==s.servicio?null:s.servicio.nombre),e.R7$(2),e.SpI("Barbero: ",null==s.barbero?null:s.barbero.nombre,""),e.R7$(2),e.JRh(t.formatDate(s.fechaHora)),e.R7$(2),e.HbH(t.getBadgeClass(s.estado)),e.R7$(),e.JRh(s.estado),e.R7$(2),e.SpI("$",e.bMT(14,7,null==s.servicio?null:s.servicio.precio),"")}}function _(a,i){1&a&&(e.j41(0,"p",10),e.EFF(1,"No tienes historial de reservas"),e.k0s())}function R(a,i){if(1&a&&(e.j41(0,"div",5)(1,"div",6)(2,"h2",7),e.EFF(3,"Pr\xf3ximas Citas"),e.k0s(),e.j41(4,"div",8),e.Z7z(5,p,15,7,"div",9,v,!1,f,2,0,"p",10),e.k0s()(),e.j41(8,"div",6)(9,"h2",7),e.EFF(10,"Historial"),e.k0s(),e.j41(11,"div",8),e.Z7z(12,F,15,9,"div",9,v,!1,_,2,0,"p",10),e.k0s()()()),2&a){const s=e.XpG();e.R7$(5),e.Dyx(s.reservasProximas),e.R7$(7),e.Dyx(s.historialReservas)}}let h=(()=>{class a{constructor(s,t){this.reservaService=s,this.authService=t,this.reservasProximas=[],this.historialReservas=[]}ngOnInit(){this.loadReservas()}loadReservas(){const s=this.authService.currentUser();s&&this.reservaService.getReservasByCliente(s.id).subscribe(t=>{if(t.success){const o=new Date;this.reservasProximas=t.data.filter(n=>n.fechaHora>=o&&["PENDIENTE","CONFIRMADA"].includes(n.estado)),this.historialReservas=t.data.filter(n=>n.fechaHora<o||["CANCELADA","FINALIZADA"].includes(n.estado))}})}formatDate(s){return new Date(s).toLocaleDateString("es-CO",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}getBadgeClass(s){const t="badge ";switch(s){case"CONFIRMADA":return t+"badge-success";case"PENDIENTE":return t+"badge-warning";case"CANCELADA":return t+"badge-danger";default:return t+"badge-info"}}static{this.\u0275fac=function(t){return new(t||a)(e.rXU(d.oO),e.rXU(d.uR))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-mis-reservas"]],standalone:!0,features:[e.aNF],decls:8,vars:1,consts:[[1,"max-w-6xl","mx-auto","p-6"],[1,"mb-8"],[1,"text-3xl","font-display","font-bold","text-gray-100","mb-2"],[1,"text-gray-400"],["message","Cargando reservas..."],[1,"space-y-6"],[1,"card"],[1,"text-xl","font-semibold","text-gray-100","mb-4"],[1,"space-y-4"],[1,"bg-gray-900","rounded-lg","p-4","border","border-gray-700"],[1,"text-gray-400","text-center","py-8"],[1,"flex","justify-between","items-start"],[1,"text-lg","font-medium","text-gray-100"],[1,"text-right"],[1,"badge","badge-success"],[1,"text-barberia-gold","font-semibold","mt-2"]],template:function(t,o){1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"h1",2),e.EFF(3," Mis Reservas "),e.k0s(),e.j41(4,"p",3),e.EFF(5," Gestiona tus citas y revisa tu historial "),e.k0s()(),e.DNE(6,m,1,0,"app-loading-spinner",4)(7,R,15,2),e.k0s()),2&t&&(e.R7$(6),e.vxM(6,o.reservaService.isLoading()?6:7))},dependencies:[l.MD,l.QX,u.NB],encapsulation:2,changeDetection:0})}}return a})()}}]);
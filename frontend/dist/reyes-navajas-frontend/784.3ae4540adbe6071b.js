"use strict";(self.webpackChunkreyes_navajas_frontend=self.webpackChunkreyes_navajas_frontend||[]).push([[784],{4784:(b,c,s)=>{s.r(c),s.d(c,{AgendaDiariaComponent:()=>f});var d=s(177),u=s(9757),e=s(4438),l=s(3897);const p=(i,n)=>n.id;function m(i,n){1&i&&e.nrm(0,"app-loading-spinner",4)}function g(i,n){if(1&i&&(e.j41(0,"p",26),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" Nota: ",t.notas," ")}}function _(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",31),e.bIt("click",function(){e.eBV(t);const r=e.XpG().$implicit,o=e.XpG(2);return e.Njj(o.iniciarServicio(r.id))}),e.EFF(1," Iniciar "),e.k0s()}}function x(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",32),e.bIt("click",function(){e.eBV(t);const r=e.XpG().$implicit,o=e.XpG(2);return e.Njj(o.finalizarServicio(r.id))}),e.EFF(1," Finalizar "),e.k0s()}}function F(i,n){if(1&i&&(e.j41(0,"div",22)(1,"div",23)(2,"div")(3,"h3",24),e.EFF(4),e.k0s(),e.j41(5,"p",3),e.EFF(6),e.k0s(),e.j41(7,"p",25),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.DNE(10,g,2,1,"p",26),e.k0s(),e.j41(11,"div",27)(12,"span"),e.EFF(13),e.k0s(),e.j41(14,"div",28),e.DNE(15,_,2,0,"button",29)(16,x,2,0,"button",30),e.k0s()()()()),2&i){const t=n.$implicit,a=e.XpG(2);e.HbH(a.getBorderClass(t.estado)),e.R7$(4),e.SpI(" ",null==t.cliente?null:t.cliente.nombre," "),e.R7$(2),e.JRh(null==t.servicio?null:t.servicio.nombre),e.R7$(2),e.Lme(" ",e.i5U(9,12,t.fechaHora,"shortTime")," - ",null==t.servicio?null:t.servicio.duracion," min "),e.R7$(2),e.vxM(10,t.notas?10:-1),e.R7$(2),e.HbH(a.getBadgeClass(t.estado)),e.R7$(),e.SpI(" ",a.getEstadoText(t.estado)," "),e.R7$(2),e.vxM(15,"CONFIRMADA"===t.estado?15:-1),e.R7$(),e.vxM(16,"EN_PROGRESO"===t.estado?16:-1)}}function v(i,n){1&i&&(e.j41(0,"div",11)(1,"div",33),e.EFF(2,"\u{1f4c5}"),e.k0s(),e.j41(3,"p",3),e.EFF(4," No tienes citas programadas para hoy "),e.k0s()())}function C(i,n){if(1&i&&(e.j41(0,"div",19)(1,"div",34),e.EFF(2),e.nI1(3,"date"),e.k0s(),e.j41(4,"div",15),e.EFF(5),e.k0s(),e.j41(6,"div",3),e.EFF(7),e.k0s(),e.j41(8,"div",35),e.EFF(9),e.k0s()()),2&i){const t=e.XpG(2);e.R7$(2),e.SpI(" ",e.i5U(3,4,t.proximaCita.fechaHora,"shortTime")," "),e.R7$(3),e.SpI(" ",null==t.proximaCita.cliente?null:t.proximaCita.cliente.nombre," "),e.R7$(2),e.SpI(" ",null==t.proximaCita.servicio?null:t.proximaCita.servicio.nombre," "),e.R7$(2),e.SpI(" ",null==t.proximaCita.servicio?null:t.proximaCita.servicio.duracion," minutos ")}}function D(i,n){1&i&&(e.j41(0,"div",36),e.EFF(1," No hay m\xe1s citas hoy "),e.k0s())}function E(i,n){if(1&i&&(e.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"h2",8),e.EFF(4," Citas de Hoy "),e.k0s(),e.j41(5,"div",9),e.Z7z(6,F,17,15,"div",10,p,!1,v,5,0,"div",11),e.k0s()()(),e.j41(9,"div",12)(10,"div",7)(11,"h3",13),e.EFF(12," Resumen del D\xeda "),e.k0s(),e.j41(13,"div",9)(14,"div",14)(15,"span",3),e.EFF(16,"Total citas:"),e.k0s(),e.j41(17,"span",15),e.EFF(18),e.k0s()(),e.j41(19,"div",14)(20,"span",3),e.EFF(21,"Completadas:"),e.k0s(),e.j41(22,"span",16),e.EFF(23),e.k0s()(),e.j41(24,"div",14)(25,"span",3),e.EFF(26,"Pendientes:"),e.k0s(),e.j41(27,"span",17),e.EFF(28),e.k0s()(),e.j41(29,"div",14)(30,"span",3),e.EFF(31,"Ingresos estimados:"),e.k0s(),e.j41(32,"span",18),e.EFF(33),e.nI1(34,"number"),e.k0s()()()(),e.j41(35,"div",7)(36,"h3",13),e.EFF(37," Pr\xf3xima Cita "),e.k0s(),e.DNE(38,C,10,7,"div",19)(39,D,2,0),e.k0s(),e.j41(40,"div",7)(41,"h3",13),e.EFF(42," Acciones R\xe1pidas "),e.k0s(),e.j41(43,"div",9)(44,"button",20),e.EFF(45," Ver Cola Virtual "),e.k0s(),e.j41(46,"button",21),e.EFF(47," Marcar Descanso "),e.k0s(),e.j41(48,"button",21),e.EFF(49," Ver M\xe9tricas "),e.k0s()()()()()),2&i){const t=e.XpG();e.R7$(6),e.Dyx(t.citasDelDia),e.R7$(12),e.JRh(t.citasDelDia.length),e.R7$(5),e.JRh(t.getCitasCompletadas()),e.R7$(5),e.JRh(t.getCitasPendientes()),e.R7$(5),e.SpI(" $",e.bMT(34,6,t.getIngresosEstimados())," "),e.R7$(5),e.vxM(38,t.proximaCita?38:39)}}let f=(()=>{class i{constructor(t,a){this.reservaService=t,this.authService=a,this.currentDate=new Date,this.citasDelDia=[],this.proximaCita=null}ngOnInit(){this.loadAgenda()}loadAgenda(){const t=this.authService.currentUser();t&&this.reservaService.getReservasByBarbero(t.id,this.currentDate).subscribe(a=>{a.success&&(this.citasDelDia=a.data.sort((r,o)=>new Date(r.fechaHora).getTime()-new Date(o.fechaHora).getTime()),this.setProximaCita())})}iniciarServicio(t){this.reservaService.iniciarServicio(t).subscribe(()=>{this.loadAgenda()})}finalizarServicio(t){this.reservaService.finalizarServicio(t).subscribe(()=>{this.loadAgenda()})}getBorderClass(t){switch(t){case"CONFIRMADA":return"border-blue-500";case"EN_PROGRESO":return"border-green-500";case"FINALIZADA":return"border-gray-500";default:return"border-yellow-500"}}getBadgeClass(t){const a="badge ";switch(t){case"CONFIRMADA":return a+"badge-info";case"EN_PROGRESO":case"FINALIZADA":return a+"badge-success";default:return a+"badge-warning"}}getEstadoText(t){switch(t){case"CONFIRMADA":return"Confirmada";case"EN_PROGRESO":return"En Progreso";case"FINALIZADA":return"Finalizada";default:return t}}getCitasCompletadas(){return this.citasDelDia.filter(t=>"FINALIZADA"===t.estado).length}getCitasPendientes(){return this.citasDelDia.filter(t=>["CONFIRMADA","EN_PROGRESO"].includes(t.estado)).length}getIngresosEstimados(){return this.citasDelDia.filter(t=>"CANCELADA"!==t.estado).reduce((t,a)=>t+(a.servicio?.precio||0),0)}setProximaCita(){const t=new Date;this.proximaCita=this.citasDelDia.find(a=>new Date(a.fechaHora)>t&&["CONFIRMADA","PENDIENTE"].includes(a.estado))}static{this.\u0275fac=function(a){return new(a||i)(e.rXU(l.oO),e.rXU(l.uR))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-agenda-diaria"]],standalone:!0,features:[e.aNF],decls:9,vars:6,consts:[[1,"max-w-6xl","mx-auto","p-6"],[1,"mb-8"],[1,"text-3xl","font-display","font-bold","text-gray-100","mb-2"],[1,"text-gray-400"],["message","Cargando agenda..."],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2"],[1,"card"],[1,"text-xl","font-semibold","text-gray-100","mb-4"],[1,"space-y-3"],[1,"bg-gray-900","rounded-lg","p-4","border-l-4",3,"class"],[1,"text-center","py-8"],[1,"space-y-6"],[1,"text-lg","font-semibold","text-gray-100","mb-4"],[1,"flex","justify-between"],[1,"text-gray-100","font-medium"],[1,"text-green-400","font-medium"],[1,"text-yellow-400","font-medium"],[1,"text-barberia-gold","font-medium"],[1,"text-center"],[1,"w-full","btn-primary"],[1,"w-full","btn-secondary"],[1,"bg-gray-900","rounded-lg","p-4","border-l-4"],[1,"flex","justify-between","items-start"],[1,"text-lg","font-medium","text-gray-100"],[1,"text-sm","text-gray-500"],[1,"text-xs","text-gray-400","mt-1"],[1,"text-right"],[1,"mt-2","space-x-2"],[1,"btn-primary","text-xs","px-3","py-1"],[1,"bg-green-600","hover:bg-green-700","text-white","text-xs","px-3","py-1","rounded"],[1,"btn-primary","text-xs","px-3","py-1",3,"click"],[1,"bg-green-600","hover:bg-green-700","text-white","text-xs","px-3","py-1","rounded",3,"click"],[1,"text-6xl","mb-4","opacity-50"],[1,"text-2xl","font-bold","text-barberia-gold","mb-2"],[1,"text-xs","text-gray-500","mt-2"],[1,"text-center","text-gray-400"]],template:function(a,r){1&a&&(e.j41(0,"div",0)(1,"div",1)(2,"h1",2),e.EFF(3," Agenda del D\xeda "),e.k0s(),e.j41(4,"p",3),e.EFF(5),e.nI1(6,"date"),e.k0s()(),e.DNE(7,m,1,0,"app-loading-spinner",4)(8,E,50,8),e.k0s()),2&a&&(e.R7$(5),e.SpI(" ",e.brH(6,2,r.currentDate,"fullDate","es")," "),e.R7$(2),e.vxM(7,r.reservaService.isLoading()?7:8))},dependencies:[d.MD,d.QX,d.vh,u.NB],encapsulation:2,changeDetection:0})}}return i})()}}]);
"use strict";(self.webpackChunkreyes_navajas_frontend=self.webpackChunkreyes_navajas_frontend||[]).push([[234],{4234:(y,d,a)=>{a.r(d),a.d(d,{GestionServiciosComponent:()=>T});var e=a(4438),l=a(177),r=a(4341),p=a(9757),u=a(3897);function v(o,s){1&o&&(e.j41(0,"div"),e.nrm(1,"app-loading-spinner",22),e.k0s())}function _(o,s){if(1&o&&(e.j41(0,"div",31)(1,"span",6),e.EFF(2,"Categor\xeda:"),e.k0s(),e.j41(3,"span",32),e.EFF(4),e.k0s()()),2&o){const i=e.XpG().$implicit;e.R7$(4),e.JRh(i.categoria)}}function f(o,s){if(1&o){const i=e.RV6();e.j41(0,"div",26)(1,"div",27)(2,"h3",28),e.EFF(3),e.k0s(),e.j41(4,"span"),e.EFF(5),e.k0s()(),e.j41(6,"p",29),e.EFF(7),e.k0s(),e.j41(8,"div",30)(9,"div",31)(10,"span",6),e.EFF(11,"Duraci\xf3n:"),e.k0s(),e.j41(12,"span",32),e.EFF(13),e.k0s()(),e.j41(14,"div",31)(15,"span",6),e.EFF(16,"Precio:"),e.k0s(),e.j41(17,"span",33),e.EFF(18),e.nI1(19,"number"),e.k0s()(),e.DNE(20,_,5,1,"div",34),e.k0s(),e.j41(21,"div",35)(22,"button",36),e.bIt("click",function(){const n=e.eBV(i).$implicit,c=e.XpG(2);return e.Njj(c.editServicio(n))}),e.EFF(23," Editar "),e.k0s(),e.j41(24,"button",37),e.bIt("click",function(){const n=e.eBV(i).$implicit,c=e.XpG(2);return e.Njj(c.toggleEstado(n))}),e.EFF(25),e.k0s()()()}if(2&o){const i=s.$implicit,t=e.XpG(2);e.R7$(3),e.SpI(" ",i.nombre," "),e.R7$(),e.HbH(t.getStatusBadgeClass(i.activo)),e.R7$(),e.SpI(" ",i.activo?"Activo":"Inactivo"," "),e.R7$(2),e.SpI(" ",i.descripcion," "),e.R7$(6),e.SpI("",i.duracion," min"),e.R7$(5),e.SpI(" \\$",e.bMT(19,11,i.precio)," "),e.R7$(2),e.Y8G("ngIf",i.categoria),e.R7$(4),e.HbH(i.activo?"btn-danger":"btn-primary"),e.R7$(),e.SpI(" ",i.activo?"Desactivar":"Activar"," ")}}function g(o,s){1&o&&(e.j41(0,"div",38)(1,"div",39),e.EFF(2,"\u{1f487}\u200d\u2642\ufe0f"),e.k0s(),e.j41(3,"p",6),e.EFF(4," No hay servicios registrados "),e.k0s()())}function F(o,s){if(1&o&&(e.j41(0,"div",23),e.DNE(1,f,26,13,"div",24)(2,g,5,0,"div",25),e.k0s()),2&o){const i=e.XpG();e.R7$(),e.Y8G("ngForOf",i.servicioService.servicios())("ngForTrackBy",i.trackByServicioId),e.R7$(),e.Y8G("ngIf",0===i.servicioService.servicios().length)}}function E(o,s){1&o&&(e.j41(0,"div",40),e.EFF(1," El nombre es requerido "),e.k0s())}function k(o,s){1&o&&(e.j41(0,"div",40),e.EFF(1," La descripci\xf3n es requerida "),e.k0s())}function b(o,s){1&o&&(e.j41(0,"span"),e.EFF(1," La duraci\xf3n es requerida "),e.k0s())}function h(o,s){1&o&&(e.j41(0,"span"),e.EFF(1," M\xednimo 30 minutos "),e.k0s())}function S(o,s){if(1&o&&e.DNE(0,h,2,0,"span",41),2&o){let i;const t=e.XpG(2);e.Y8G("ngIf",null==(i=t.servicioForm.get("duracion"))||null==i.errors?null:i.errors.min)}}function j(o,s){if(1&o&&(e.j41(0,"div",40),e.DNE(1,b,2,0,"span",8)(2,S,1,1,"ng-template",null,1,e.C5r),e.k0s()),2&o){let i;const t=e.sdS(3),n=e.XpG();e.R7$(),e.Y8G("ngIf",null==(i=n.servicioForm.get("duracion"))||null==i.errors?null:i.errors.required)("ngIfElse",t)}}function C(o,s){1&o&&(e.j41(0,"span"),e.EFF(1," El precio es requerido "),e.k0s())}function G(o,s){1&o&&(e.j41(0,"span"),e.EFF(1," Precio m\xednimo \\$1,000 "),e.k0s())}function I(o,s){if(1&o&&e.DNE(0,G,2,0,"span",41),2&o){let i;const t=e.XpG(2);e.Y8G("ngIf",null==(i=t.servicioForm.get("precio"))||null==i.errors?null:i.errors.min)}}function x(o,s){if(1&o&&(e.j41(0,"div",40),e.DNE(1,C,2,0,"span",8)(2,I,1,1,"ng-template",null,2,e.C5r),e.k0s()),2&o){let i;const t=e.sdS(3),n=e.XpG();e.R7$(),e.Y8G("ngIf",null==(i=n.servicioForm.get("precio"))||null==i.errors?null:i.errors.required)("ngIfElse",t)}}function D(o,s){if(1&o&&(e.j41(0,"option",42),e.EFF(1),e.k0s()),2&o){const i=s.$implicit;e.Y8G("value",i),e.R7$(),e.SpI(" ",i," ")}}let T=(()=>{class o{constructor(i,t){this.fb=i,this.servicioService=t,this.showModal=(0,e.vPA)(!1),this.isEditing=(0,e.vPA)(!1),this.currentServicio=null,this.categorias=["Corte","Barba","Afeitado","Combo","Tratamiento","Especial"],this.servicioForm=this.fb.group({nombre:["",r.k0.required],descripcion:["",r.k0.required],duracion:[45,[r.k0.required,r.k0.min(30)]],precio:["",[r.k0.required,r.k0.min(1e3)]],categoria:[""]})}ngOnInit(){}openCreateModal(){this.isEditing.set(!1),this.currentServicio=null,this.servicioForm.reset({duracion:45}),this.showModal.set(!0)}editServicio(i){this.isEditing.set(!0),this.currentServicio=i,this.servicioForm.patchValue({nombre:i.nombre,descripcion:i.descripcion,duracion:i.duracion,precio:i.precio,categoria:i.categoria}),this.showModal.set(!0)}closeModal(){this.showModal.set(!1),this.currentServicio=null,this.servicioForm.reset()}saveServicio(){if(this.servicioForm.valid){const i=this.servicioForm.value;this.isEditing()?this.servicioService.updateServicio(this.currentServicio.id,i).subscribe(()=>{this.closeModal()}):this.servicioService.createServicio(i).subscribe(()=>{this.closeModal()})}else this.markFormGroupTouched()}toggleEstado(i){this.servicioService.updateServicio(i.id,{activo:!i.activo}).subscribe()}isFieldInvalid(i){const t=this.servicioForm.get(i);return!(!t||!t.invalid||!t.dirty&&!t.touched)}getStatusBadgeClass(i){return i?"badge badge-success":"badge badge-danger"}markFormGroupTouched(){Object.keys(this.servicioForm.controls).forEach(i=>{this.servicioForm.get(i)?.markAsTouched()})}trackByServicioId(i,t){return t.id}trackByCategoria(i,t){return t}static{this.\u0275fac=function(t){return new(t||o)(e.rXU(r.ok),e.rXU(u.E5))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-gestion-servicios"]],standalone:!0,features:[e.aNF],decls:43,vars:11,consts:[["contentTemplate",""],["minDurationError",""],["minPriceError",""],[1,"max-w-6xl","mx-auto","p-6"],[1,"mb-8","flex","justify-between","items-center"],[1,"text-3xl","font-display","font-bold","text-gray-100","mb-2"],[1,"text-gray-400"],[1,"btn-primary",3,"click"],[4,"ngIf","ngIfElse"],[3,"close","confirm","isOpen","title"],[1,"space-y-4",3,"formGroup"],[1,"form-group"],[1,"form-label"],["type","text","formControlName","nombre","placeholder","Ej: Corte Cl\xe1sico",1,"form-input"],["class","form-error",4,"ngIf"],["formControlName","descripcion","rows","3","placeholder","Describe el servicio...",1,"form-input"],[1,"grid","grid-cols-2","gap-4"],["type","number","formControlName","duracion","placeholder","45","min","30",1,"form-input"],["type","number","formControlName","precio","placeholder","25000","min","1000",1,"form-input"],["formControlName","categoria",1,"form-input"],["value",""],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["message","Cargando servicios..."],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","card hover:shadow-xl-gold transition-shadow",4,"ngFor","ngForOf","ngForTrackBy"],["class","col-span-full text-center py-12",4,"ngIf"],[1,"card","hover:shadow-xl-gold","transition-shadow"],[1,"flex","justify-between","items-start","mb-4"],[1,"text-xl","font-semibold","text-gray-100"],[1,"text-gray-400","mb-4"],[1,"space-y-2","mb-4"],[1,"flex","justify-between"],[1,"text-gray-100"],[1,"text-barberia-gold","font-semibold"],["class","flex justify-between",4,"ngIf"],[1,"flex","space-x-2"],[1,"btn-secondary","flex-1","text-sm",3,"click"],[1,"flex-1","text-sm",3,"click"],[1,"col-span-full","text-center","py-12"],[1,"text-6xl","mb-4","opacity-50"],[1,"form-error"],[4,"ngIf"],[3,"value"]],template:function(t,n){if(1&t){const c=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div")(3,"h1",5),e.EFF(4," Gesti\xf3n de Servicios "),e.k0s(),e.j41(5,"p",6),e.EFF(6," Administra los servicios ofrecidos en la barber\xeda "),e.k0s()(),e.j41(7,"button",7),e.bIt("click",function(){return e.eBV(c),e.Njj(n.openCreateModal())}),e.EFF(8," Nuevo Servicio "),e.k0s()(),e.DNE(9,v,2,0,"div",8)(10,F,3,3,"ng-template",null,0,e.C5r),e.j41(12,"app-modal",9),e.bIt("close",function(){return e.eBV(c),e.Njj(n.closeModal())})("confirm",function(){return e.eBV(c),e.Njj(n.saveServicio())}),e.j41(13,"form",10)(14,"div",11)(15,"label",12),e.EFF(16,"Nombre del Servicio"),e.k0s(),e.nrm(17,"input",13),e.DNE(18,E,2,0,"div",14),e.k0s(),e.j41(19,"div",11)(20,"label",12),e.EFF(21,"Descripci\xf3n"),e.k0s(),e.j41(22,"textarea",15),e.EFF(23,"        "),e.k0s(),e.DNE(24,k,2,0,"div",14),e.k0s(),e.j41(25,"div",16)(26,"div",11)(27,"label",12),e.EFF(28,"Duraci\xf3n (minutos)"),e.k0s(),e.nrm(29,"input",17),e.DNE(30,j,4,2,"div",14),e.k0s(),e.j41(31,"div",11)(32,"label",12),e.EFF(33,"Precio"),e.k0s(),e.nrm(34,"input",18),e.DNE(35,x,4,2,"div",14),e.k0s()(),e.j41(36,"div",11)(37,"label",12),e.EFF(38,"Categor\xeda"),e.k0s(),e.j41(39,"select",19)(40,"option",20),e.EFF(41,"Selecciona una categor\xeda"),e.k0s(),e.DNE(42,D,2,2,"option",21),e.k0s()()()()()}if(2&t){const c=e.sdS(11);e.R7$(9),e.Y8G("ngIf",n.servicioService.isLoading())("ngIfElse",c),e.R7$(3),e.Y8G("isOpen",n.showModal())("title",n.isEditing()?"Editar Servicio":"Nuevo Servicio"),e.R7$(),e.Y8G("formGroup",n.servicioForm),e.R7$(5),e.Y8G("ngIf",n.isFieldInvalid("nombre")),e.R7$(6),e.Y8G("ngIf",n.isFieldInvalid("descripcion")),e.R7$(6),e.Y8G("ngIf",n.isFieldInvalid("duracion")),e.R7$(5),e.Y8G("ngIf",n.isFieldInvalid("precio")),e.R7$(7),e.Y8G("ngForOf",n.categorias)("ngForTrackBy",n.trackByCategoria)}},dependencies:[l.MD,l.Sq,l.bT,l.QX,r.X1,r.qT,r.xH,r.y7,r.me,r.Q0,r.wz,r.BC,r.cb,r.VZ,r.j4,r.JD,p.NB,p.zf],encapsulation:2,changeDetection:0})}}return o})()}}]);